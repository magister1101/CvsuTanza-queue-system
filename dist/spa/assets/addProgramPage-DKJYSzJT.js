import{Q as I,a as h}from"./QPage-DPsZlzTf.js";import{Q as f}from"./QInput-CefROznu.js";import{Q as V}from"./QSelect-BXUjDScj.js";import{Q as B,a as F,c as z}from"./QTable-82CfmyBW.js";import{f as l,u as $,k as D,o as M,b as O,w as r,e as t,a as o,h as R,i as W,g as j,Q as w,N as Q}from"./index-BMhglyKV.js";import{Q as E}from"./QCardActions-BouhufK_.js";import{Q as L}from"./QForm-RWsXu0Um.js";import{Q as Y}from"./QCard-Dna_0p2Q.js";import{a as _}from"./axios-upsvKRUO.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-key-composition-BODgx2F7.js";import"./use-dark-xojyzzLc.js";import"./format-DKTbQgkX.js";import"./use-prevent-scroll-NfEf-uE_.js";import"./scroll-BbPNP22x.js";import"./QDialog-CdgP6t9L.js";import"./use-timeout-FgPeAw9M.js";import"./QList-Q1GbiNYp.js";const H={class:"q-pa-md content-container"},J={class:"row q-col-gutter-md"},K={class:"col-12"},X={class:"input-field"},Z={class:"row q-col-gutter-md"},ee={class:"col-12 col-sm-4"},te={class:"input-field"},se={class:"col-12 col-sm-4"},oe={class:"input-field"},le={class:"col-12 col-sm-4"},ae={class:"input-field"},re={class:"col-12 col-sm-4"},ie={class:"input-field"},de={class:"col-12 col-sm-4"},ne={class:"input-field"},ue={class:"row q-col-gutter-md"},me={class:"col-12"},ce={class:"input-field"},pe={class:"row q-col-gutter-md"},ve={class:"col-12"},fe={class:"responsive-table"},ge={__name:"addProgramPage",setup(be){const i=l(""),d=l(""),n=l(""),x=$(),C=l({}),u=l("");l([]);const m=l(0),c=l(""),p=l(""),S=["First","Second","Third","Fourth"],P=["First","Second","Summer"],g=l(!1),v=l([]),b=l(""),q=l([]),k=[{name:"select",label:"Select",align:"left",field:"select"},{name:"courseName",label:"Course Name",field:"courseName",align:"left",sortable:!0},{name:"courseCode",label:"Course Code",field:"courseCode",align:"left",sortable:!0}];async function U(){try{const a=localStorage.getItem("authToken"),e=await _.get("https://pre-registration-and-queueing-system-be.vercel.app/courses/getProgram?isArchived=false",{headers:{Authorization:a}});C.value={option:e.data.map(s=>s.name)}}catch(a){console.error(a)}}async function N(){try{const a=localStorage.getItem("authToken"),e=await _.get("https://pre-registration-and-queueing-system-be.vercel.app/courses?isArchived=false",{headers:{Authorization:a}});q.value=e.data.map((s,y)=>({id:s._id,index:y+1,courseCode:s.code,courseName:s.name,action:s._id}))}catch(a){console.error("Error fetching programs:",a)}}async function T(){g.value=!0;try{const a=localStorage.getItem("authToken");await _.post("https://pre-registration-and-queueing-system-be.vercel.app/courses/createCourse",{code:i.value,course:n.value,name:u.value,description:d.value,prerequisite:v.value,unit:m.value,year:c.value,semester:p.value},{headers:{Authorization:a,"Content-Type":"application/json"}}),Q.create({type:"positive",message:"Course added successfully!"}),x.push("/new/addCourses"),u.value="",i.value="",n.value="",d.value="",v.value=[],m.value="",c.value="",p.value=""}catch(a){console.error(a),Q.create({type:"negative",message:"Something Went Wrong!"})}finally{g.value=!1}}async function A(){u.value="",i.value="",n.value="",d.value="",v.value=[],m.value="",c.value="",p.value="",x.push("/new/addCourses")}return D(()=>{N(),U()}),(a,e)=>(M(),O(I,{class:"main-container"},{default:r(()=>[t("div",null,[o(Y,{style:{width:"800px","max-width":"95vw"}},{default:r(()=>[o(L,{onSubmit:R(T,["prevent"])},{default:r(()=>[t("div",H,[o(h,{class:"text-h6 text-weight-medium",style:{color:"#282726"}},{default:r(()=>e[9]||(e[9]=[W(" Add Course ")])),_:1}),o(h,null,{default:r(()=>[t("div",J,[t("div",K,[e[10]||(e[10]=t("div",{class:"text-subtitle2 q-mb-sm"},"Course Name",-1)),t("div",X,[o(f,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),type:"text",borderless:""},null,8,["modelValue"])])])]),t("div",Z,[t("div",ee,[e[11]||(e[11]=t("div",{class:"text-subtitle2 q-mb-sm"},"Program",-1)),t("div",te,[o(V,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),type:"text",borderless:"",options:C.value.option},null,8,["modelValue","options"])])]),t("div",se,[e[12]||(e[12]=t("div",{class:"text-subtitle2 q-mb-sm"},"Course Code",-1)),t("div",oe,[o(f,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value=s),type:"text",borderless:""},null,8,["modelValue"])])]),t("div",le,[e[13]||(e[13]=t("div",{class:"text-subtitle2 q-mb-sm"},"Total Units",-1)),t("div",ae,[o(f,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s),type:"number",borderless:""},null,8,["modelValue"])])]),t("div",re,[e[14]||(e[14]=t("div",{class:"text-subtitle2 q-mb-sm"},"Year(Level)",-1)),t("div",ie,[o(V,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=s=>c.value=s),type:"text",borderless:"",options:S},null,8,["modelValue"])])]),t("div",de,[e[15]||(e[15]=t("div",{class:"text-subtitle2 q-mb-sm"},"Semester",-1)),t("div",ne,[o(V,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),type:"text",borderless:"",options:P},null,8,["modelValue"])])])]),t("div",ue,[t("div",me,[e[16]||(e[16]=t("div",{class:"text-subtitle2 q-mb-sm"},"Course Description",-1)),t("div",ce,[o(f,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=s=>d.value=s),type:"textarea",borderless:"",label:"optional"},null,8,["modelValue"])])])]),t("div",pe,[t("div",ve,[e[17]||(e[17]=t("div",{class:"text-subtitle2 q-mb-sm"},"Select Prerequisites",-1)),t("div",fe,[o(B,{filter:b.value,rows:q.value,columns:k,"row-key":"action"},{"body-cell-select":r(s=>[o(F,{props:s},{default:r(()=>[o(z,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=y=>v.value=y),val:s.row.action},null,8,["modelValue","val"])]),_:2},1032,["props"])]),"top-left":r(()=>[o(f,{borderless:"",dense:"",debounce:"300",modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=s=>b.value=s),placeholder:"Search"},{append:r(()=>[o(j,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["filter","rows"])])])])]),_:1}),o(E,{align:"right"},{default:r(()=>[o(w,{flat:"",label:"Close",onClick:A,color:"red-8",class:"q-px-md"}),o(w,{loading:g.value,type:"submit",flat:"",label:"Add",class:"q-px-md action-button",style:{width:"100px"}},null,8,["loading"])]),_:1})])]),_:1})]),_:1})])]),_:1}))}},Fe=G(ge,[["__scopeId","data-v-eed0e8af"]]);export{Fe as default};
