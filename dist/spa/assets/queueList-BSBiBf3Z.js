import{Q as h,a as o}from"./QPage-DPsZlzTf.js";import{f as m,z as C,k as S,o as r,b as Q,w as t,e as n,a as s,i as d,g as T,t as i,Q as L,c as f,n as N,F as y,m as $}from"./index-BMhglyKV.js";import{Q as B}from"./QInput-CefROznu.js";import{Q as I,a as c}from"./QTable-82CfmyBW.js";import{Q as U}from"./QTr-DrqNJx8U.js";import{Q as F}from"./QCard-Dna_0p2Q.js";import{Q as E}from"./QDialog-CdgP6t9L.js";import{a as w}from"./axios-upsvKRUO.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-key-composition-BODgx2F7.js";import"./use-dark-xojyzzLc.js";import"./QList-Q1GbiNYp.js";import"./QSelect-BXUjDScj.js";import"./format-DKTbQgkX.js";import"./use-prevent-scroll-NfEf-uE_.js";import"./scroll-BbPNP22x.js";import"./use-timeout-FgPeAw9M.js";const R={class:"main-container q-pt-md"},j={class:"content-container"},z={class:"table-header"},A={class:"search-box"},P={class:"dialog-content"},Y={class:"label"},G={__name:"queueList",setup(H){const v=m(!1),p=m(!1),_=m(""),g=m([]),l=m(null),q=[{name:"queueNumber",field:"queueNumber",label:"Queue Number",align:"left"},{name:"student",field:"student",label:"Student",align:"left"},{name:"destination",field:"destination",label:"Destination",align:"left",sortable:!0},{name:"status",field:"status",label:"Status",align:"left",sortable:!0},{name:"action",field:"action",label:"Action",align:"left"}],D=C(()=>l.value?{"Queue Number":l.value.queueNumber,Username:l.value.student.username,Email:l.value.student.email,"First Name":l.value.student.firstName,"Middle Name":l.value.student.middleName,"Last Name":l.value.student.lastName,Course:l.value.student.course,Year:l.value.student.year,Section:l.value.student.section,"Is Regular":l.value.student.isRegular,Status:l.value.status,Destination:l.value.destination}:{});async function V(u){v.value=!0;try{const e=await w.get(`https://pre-registration-and-queueing-system-be.vercel.app/queues?query=${u}`);l.value=e.data[0]}catch(e){console.error(e)}}async function k(){p.value=!0;try{const u=await w.get("https://pre-registration-and-queueing-system-be.vercel.app/queues",{headers:{"Content-Type":"application/json"}});g.value=u.data.map(e=>({id:e._id,queueNumber:e.queueNumber,student:x(e.student),destination:e.destination,status:e.status}))}catch(u){console.error(u)}finally{p.value=!1}}function x(u){return u?`${u.firstName} ${u.middleName||""} ${u.lastName}`.trim():""}return S(k),(u,e)=>(r(),Q(h,{style:{height:"90vh"}},{default:t(()=>[n("div",R,[n("div",j,[s(o,{class:"header-section"},{default:t(()=>e[2]||(e[2]=[n("div",{class:"text-weight-medium text-center"},"Queue List",-1)])),_:1}),s(o,{class:"q-mt-xl"},{default:t(()=>[s(I,{loading:p.value,rows:g.value,columns:q,"row-key":"id",separator:"cell",flat:"",bordered:"",filter:_.value},{top:t(()=>[n("div",z,[s(o,{class:"header-title"},{default:t(()=>e[3]||(e[3]=[d("List of all Queues")])),_:1}),n("div",A,[s(B,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),dense:"",borderless:""},{append:t(()=>[s(T,{name:"search"})]),_:1},8,["modelValue"])])])]),body:t(a=>[s(U,{props:a},{default:t(()=>[s(c,null,{default:t(()=>[d(i(a.row.queueNumber),1)]),_:2},1024),s(c,null,{default:t(()=>[d(i(a.row.student),1)]),_:2},1024),s(c,null,{default:t(()=>[d(i(a.row.destination),1)]),_:2},1024),s(c,null,{default:t(()=>[d(i(a.row.status),1)]),_:2},1024),s(c,null,{default:t(()=>[s(L,{label:"View Details",class:"details-btn",onClick:b=>V(a.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","filter"])]),_:1}),s(E,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a)},{default:t(()=>[s(F,{class:"dialog-card"},{default:t(()=>[l.value?(r(),Q(o,{key:0},{default:t(()=>[e[6]||(e[6]=n("div",{class:"dialog-header"},"Queue Details",-1)),n("div",P,[s(o,{class:"student-details"},{default:t(()=>[e[4]||(e[4]=n("div",{class:"section-title"},"Student Details:",-1)),(r(!0),f(y,null,N(D.value,(a,b)=>(r(),f("div",{class:"details",key:b},[n("span",Y,i(b)+":",1),d(" "+i(a),1)]))),128))]),_:1}),s(o,{class:"courses-section"},{default:t(()=>[e[5]||(e[5]=n("div",{class:"section-title"},"Courses to Take:",-1)),(r(!0),f(y,null,N(l.value.courseToTake,a=>(r(),f("div",{class:"course-item",key:a.code},[n("div",null,i(a.name)+" ("+i(a.code)+") - "+i(a.unit)+" Units",1)]))),128))]),_:1})])]),_:1})):$("",!0)]),_:1})]),_:1},8,["modelValue"])])])]),_:1}))}},me=M(G,[["__scopeId","data-v-4f0ef0b0"]]);export{me as default};
