import{u as b,f as p,o as h,b as k,w as a,e as n,a as t,Q as c,g as Q,h as q,i as m,j as V,N as f}from"./index-BMhglyKV.js";import{Q as I,a as s}from"./QPage-DPsZlzTf.js";import{Q as g}from"./QInput-CefROznu.js";import{Q as P}from"./QForm-RWsXu0Um.js";import{a as v}from"./axios-upsvKRUO.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-key-composition-BODgx2F7.js";import"./use-dark-xojyzzLc.js";const B={style:{background:`url('https://res.cloudinary.com/dqaw6ndtn/image/upload/v1737617278/assets/queing/q5xrh22iplhm2bndvvru.jpg')
            no-repeat center center`,"background-size":"cover",width:"100%","min-height":"100vh",border:"3px solid #606060"}},C={class:"main-container"},S={style:{width:"100%"}},j={style:{width:"100%"}},N={__name:"loginPage",setup(U){const r=b(),i=p(""),u=p(""),d=p(!1);async function y(){d.value=!0;try{const l=await v.post("https://pre-registration-and-queueing-system-be.vercel.app/users/login",{username:i.value,password:u.value},{headers:{"Content-Type":"application/json"}});if(l.status===200){const e=await l.data.token;localStorage.setItem("authToken","Bearer "+e),f.create({type:"positive",message:"Login successful!"}),await new Promise(x=>setTimeout(x,500));const o=localStorage.getItem("authToken"),_=await v.post("https://pre-registration-and-queueing-system-be.vercel.app/queues/createQueue",{},{headers:{"Content-Type":"application/json",authorization:o}});r.replace(`/queuingPage/${_.data.queue._id}`)}else f.create({type:"negative",message:"Unexpected response from server."})}catch(l){console.error(l),f.create({message:"Incorrect username or password.",type:"negative"})}finally{d.value=!1}}async function w(){r.push("/")}return(l,e)=>(h(),k(I,null,{default:a(()=>[n("div",null,[n("div",B,[n("div",C,[t(s,{class:"container-courseInfo"},{default:a(()=>[t(s,null,{default:a(()=>[t(c,{flat:"",onClick:w},{default:a(()=>[t(Q,{name:"arrow_back_ios"})]),_:1})]),_:1}),t(s,{class:"text-center"},{default:a(()=>e[3]||(e[3]=[n("div",{class:"text-h4 text-weight-bold text-uppercase"},"Student Login",-1)])),_:1}),t(P,{onSubmit:q(y,["prevent"])},{default:a(()=>[t(s,{style:{width:"100%"}},{default:a(()=>[e[4]||(e[4]=m(" Username: ")),n("div",S,[t(g,{type:"text",outlined:"",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o)},null,8,["modelValue"])])]),_:1}),t(s,{style:{width:"100%"}},{default:a(()=>[e[5]||(e[5]=m(" Password: ")),n("div",j,[t(g,{type:"password",outlined:"",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o)},null,8,["modelValue"])])]),_:1}),t(s,{class:"flex flex-center"},{default:a(()=>[t(c,{class:"q-py-md q-px-xl",label:"Sign In","no-caps":"",type:"submit",loading:d.value,flat:"",style:{"background-color":"#30572d",color:"#ffffff"}},null,8,["loading"])]),_:1})]),_:1}),t(s,{style:{display:"flex","justify-content":"space-around"}},{default:a(()=>[t(c,{label:"Public Monitor",flat:"",style:{border:"1px solid #606060"},"no-caps":"",onClick:e[2]||(e[2]=o=>V(r).push("/publicMonitor"))})]),_:1})]),_:1})])])])]),_:1}))}},E=T(N,[["__scopeId","data-v-2177bf13"]]);export{E as default};
