import{l as q,al as k,k as z,G as $,U as x,x as B,am as M,I as p,_ as a,T as F,aG as _}from"./index-BMhglyKV.js";import{b as G,a as I,h as j}from"./scroll-BbPNP22x.js";const N={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Q=["beforeShow","show","beforeHide","hide"];function Z({showing:e,canShow:t,hideOnRouteChange:n,handleShow:l,handleHide:r,processOnMount:m}){const i=$(),{props:s,emit:u,proxy:V}=i;let d;function Y(o){e.value===!0?y(o):L(o)}function L(o){if(s.disable===!0||o!==void 0&&o.qAnchorHandled===!0||t!==void 0&&t(o)!==!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!0),d=o,x(()=>{d===o&&(d=void 0)})),(s.modelValue===null||f===!1)&&E(o)}function E(o){e.value!==!0&&(e.value=!0,u("beforeShow",o),l!==void 0?l(o):u("show",o))}function y(o){if(s.disable===!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!1),d=o,x(()=>{d===o&&(d=void 0)})),(s.modelValue===null||f===!1)&&H(o)}function H(o){e.value!==!1&&(e.value=!1,u("beforeHide",o),r!==void 0?r(o):u("hide",o))}function P(o){s.disable===!0&&o===!0?s["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):o===!0!==e.value&&(o===!0?E:H)(d)}q(()=>s.modelValue,P),n!==void 0&&k(i)===!0&&q(()=>V.$route.fullPath,()=>{n.value===!0&&e.value===!0&&y()}),m===!0&&z(()=>{P(s.modelValue)});const S={show:L,hide:y,toggle:Y};return Object.assign(V,S),S}function ee(e,t,n){let l;function r(){l!==void 0&&(M.remove(l),l=void 0)}return B(()=>{e.value===!0&&r()}),{removeFromHistory:r,addToHistory(){l={condition:()=>n.value===!0,handler:t},M.add(l)}}}let w=0,b,g,v,T=!1,C,U,A,c=null;function K(e){O(e)&&F(e)}function O(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=_(e),n=e.shiftKey&&!e.deltaX,l=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),r=n||l?e.deltaY:e.deltaX;for(let m=0;m<t.length;m++){const i=t[m];if(j(i,l))return l?r<0&&i.scrollTop===0?!0:r>0&&i.scrollTop+i.clientHeight===i.scrollHeight:r<0&&i.scrollLeft===0?!0:r>0&&i.scrollLeft+i.clientWidth===i.scrollWidth}return!0}function W(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function h(e){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:l}=document.scrollingElement;(v===void 0||t!==window.innerHeight)&&(v=n-t,document.scrollingElement.scrollTop=l),l>v&&(document.scrollingElement.scrollTop-=Math.ceil((l-v)/8))}))}function X(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:l,overflowX:r}=window.getComputedStyle(t);b=G(window),g=I(window),C=t.style.left,U=t.style.top,A=window.location.href,t.style.left=`-${b}px`,t.style.top=`-${g}px`,r!=="hidden"&&(r==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",h,a.passiveCapture),window.visualViewport.addEventListener("scroll",h,a.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",W,a.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${e}EventListener`]("wheel",K,a.notPassive),e==="remove"&&(p.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",h,a.passiveCapture),window.visualViewport.removeEventListener("scroll",h,a.passiveCapture)):window.removeEventListener("scroll",W,a.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=C,t.style.top=U,window.location.href===A&&window.scrollTo(b,g),v=void 0)}function R(e){let t="add";if(e===!0){if(w++,c!==null){clearTimeout(c),c=null;return}if(w>1)return}else{if(w===0||(w--,w>0))return;if(t="remove",p.is.ios===!0&&p.is.nativeMobile===!0){c!==null&&clearTimeout(c),c=setTimeout(()=>{X(t),c=null},100);return}}X(t)}function te(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,R(t))}}}export{Q as a,Z as b,ee as c,te as d,N as u};
