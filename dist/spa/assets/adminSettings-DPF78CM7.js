import{Q as h,a as v}from"./QPage-DPsZlzTf.js";import{Q as w}from"./QImg-CaYrKlGY.js";import{Q as m}from"./QInput-CefROznu.js";import{f as l,k as x,o as q,b as V,w as u,N as n,e as a,a as s,i as Q,h as P,Q as N}from"./index-BMhglyKV.js";import{Q as I}from"./QForm-RWsXu0Um.js";import{Q as k}from"./QCard-Dna_0p2Q.js";import{a as g}from"./axios-upsvKRUO.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-timeout-FgPeAw9M.js";import"./use-key-composition-BODgx2F7.js";import"./use-dark-xojyzzLc.js";const S={class:"content-container q-px-md q-px-sm-xl"},$={class:"profile-header q-mb-xl flex flex-center column"},U={class:"profile-image-container"},A={class:"q-mb-md"},B={class:"row q-col-gutter-md"},D={class:"col-12 col-sm-6"},T={class:"col-12 col-sm-6"},j={class:"q-mb-md"},z={class:"row q-col-gutter-md"},E={class:"col-12 col-sm-6"},F={class:"col-12 col-sm-6"},M={class:"flex flex-center"},R={__name:"adminSettings",setup(G){const p=l(!1),i=l(""),d=l(""),o=l(""),c=l(""),_=l(""),f=l("");async function y(){p.value=!0;try{if(!i.value||!d.value){n.create({type:"negative",message:"Username and Designation cannot be empty"});return}if(o.value||c.value){const t=/[!@#$%^&*(),.?":{}|<>]/;if(o.value.length<6||!t.test(o.value)){n.create({type:"negative",message:"New Password must be at least 6 characters and include a special character."});return}if(o.value!==c.value){n.create({type:"negative",message:"Password do not match."});return}}const r=localStorage.getItem("authToken"),e={username:i.value,role:d.value};o.value&&(e.password=o.value),await g.post(`https://pre-registration-and-queueing-system-be.vercel.app/users/update/${f.value}`,e,{headers:{Authorization:r,"Content-Type":"application/json"}}),n.create({type:"positive",message:"Profile updated successfully!"})}catch(r){console.error(r),n.create({type:"negative",message:"Error updating profile."})}finally{p.value=!1}}async function b(){const r=localStorage.getItem("authToken");try{const e=await g.get("https://pre-registration-and-queueing-system-be.vercel.app/users/myProfile",{headers:{Authorization:r}});console.log(e.data),f.value=e.data._id;const t=e.data;i.value=t.username,d.value=t.role,_.value=`${t.firstName} ${t.middleName} ${t.lastName}`}catch(e){console.error(e),n.create({type:"negative",message:"Error fetching user information"})}}return x(()=>{b()}),(r,e)=>(q(),V(h,{class:"main-container"},{default:u(()=>[a("div",S,[s(v,{class:"q-pt-md"},{default:u(()=>e[4]||(e[4]=[a("div",{class:"text-h6 text-weight-medium",style:{color:"#282726"}},[Q(" Admin/"),a("span",{style:{color:"#b1b2b4"}},"Admin Profile")],-1)])),_:1}),s(v,{class:"flex flex-center",style:{width:"100%"}},{default:u(()=>[s(k,{class:"profile-card q-pa-md"},{default:u(()=>[a("div",$,[a("div",U,[s(w,{class:"rounded-image",src:"https://res.cloudinary.com/dqaw6ndtn/image/upload/v1737617283/assets/queing/ja3s742lgdzsca55fu1w.png",style:{"border-radius":"50%",width:"180px",height:"180px","object-fit":"cover"}})])]),s(I,{onSubmit:P(y,["prevent"])},{default:u(()=>[a("div",A,[e[5]||(e[5]=a("div",{class:"text-subtitle1 q-mb-sm"},"Profile Information",-1)),a("div",B,[a("div",D,[s(m,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),label:"Username",outlined:""},null,8,["modelValue"])]),a("div",T,[s(m,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),label:"Department",outlined:"",disable:""},null,8,["modelValue"])])])]),a("div",j,[e[6]||(e[6]=a("div",{class:"text-subtitle1 q-mb-sm"},"Change Password",-1)),a("div",z,[a("div",E,[s(m,{modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value=t),type:"password",label:"New Password",outlined:""},null,8,["modelValue"])]),a("div",F,[s(m,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t),type:"password",label:"Confirm Password",outlined:""},null,8,["modelValue"])])])]),a("div",M,[s(N,{label:"Save",type:"submit",loading:p.value,color:"primary",style:{"background-color":"#13260f",color:"#ffffff"}},null,8,["loading"])])]),_:1})]),_:1})]),_:1})])]),_:1}))}},te=C(R,[["__scopeId","data-v-7383b5d8"]]);export{te as default};
